<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
</head>
<body>
<script>
	var obj = {
		name: 'sven',
		address: '深圳市'
	};
	obj.address = obj.address + '福田区';


	// 假设我们在编写一个飞机大战的游戏，随着经验值的增加，我们操作的飞机对象可以升级成更厉害的飞机，一开始这些飞机只能发射普通的子弹，升到第二级时可以发射导弹，升到第三级时可以发射原子弹。
	// 
	// 
	var Plane = function(){

	}

	Plane.prototype.fire = function(){
		console.log('发射普通子弹');
	}

	// 接下来增加两个装饰类，分别是导弹和原子弹
	
	var MissileDecorator = function(plane){
		this.plane = plane;
	}

	MissileDecorator.prototype.fire = function(){
		this.plane.fire();
		console.log('发射导弹');
	}

	var AtomDecorator = function(plane){
		this.plane.fire();
		console.log('发射原子弹');
	}

	var plane = new Plane();

	plane = new MissileDecorator(plane);

	plane = new AtomDecorator(plane);

	plane.fire();


	/**
	 * 装饰者模式将一个对象嵌入另一个对象
之中，实际上相当于这个对象被另一个对象包
装起来，形成一条包装链。请求随着这条链依
次传递到所有的对象，每个对象都有处理这条
请求的机会
	 */
	
	// 回到 JavaScript 的装饰者
	var plane = {
		fire:function(){
			console.log('发射普通子弹');
		}
	}

	var missileDecorator = function(){
		console.log('发射导弹');
	}

	var atomDecorator = function(){
		console.log('发射原子弹');
	}


	var fire1 = plane.fire;

	plane.fire = function(){
		fire1();
		missileDecorator();
	}

	var fire2 = plane.fire;

	plane.fire = function(){
		fire2();
		atomDecorator();
	}

	plane.fire();
</script>	
</body>
</html>